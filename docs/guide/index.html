<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NoSmoke 2.0 Cookbook | NoSmoke</title>
    <meta name="description" content="A cross platform UI crawler which scans view trees then generate and execute UI test cases.">
    
    
    <link rel="preload" href="/NoSmoke/assets/css/0.styles.7957c06f.css" as="style"><link rel="preload" href="/NoSmoke/assets/js/app.085bbc4d.js" as="script"><link rel="preload" href="/NoSmoke/assets/js/4.d8129c02.js" as="script"><link rel="prefetch" href="/NoSmoke/assets/js/10.637a82e0.js"><link rel="prefetch" href="/NoSmoke/assets/js/11.58336d05.js"><link rel="prefetch" href="/NoSmoke/assets/js/12.ce1f53be.js"><link rel="prefetch" href="/NoSmoke/assets/js/13.72808d1c.js"><link rel="prefetch" href="/NoSmoke/assets/js/14.0a8f3a95.js"><link rel="prefetch" href="/NoSmoke/assets/js/15.ee9ab771.js"><link rel="prefetch" href="/NoSmoke/assets/js/16.da04399c.js"><link rel="prefetch" href="/NoSmoke/assets/js/17.f519d8c7.js"><link rel="prefetch" href="/NoSmoke/assets/js/18.8c4e3c16.js"><link rel="prefetch" href="/NoSmoke/assets/js/19.c6cdb075.js"><link rel="prefetch" href="/NoSmoke/assets/js/2.17c5b991.js"><link rel="prefetch" href="/NoSmoke/assets/js/3.e5eb65bc.js"><link rel="prefetch" href="/NoSmoke/assets/js/5.91be2d1a.js"><link rel="prefetch" href="/NoSmoke/assets/js/6.8d1abef6.js"><link rel="prefetch" href="/NoSmoke/assets/js/7.f2b906b1.js"><link rel="prefetch" href="/NoSmoke/assets/js/8.57ef387f.js"><link rel="prefetch" href="/NoSmoke/assets/js/9.40a95c48.js">
    <link rel="stylesheet" href="/NoSmoke/assets/css/0.styles.7957c06f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/NoSmoke/" class="home-link router-link-active"><!----> <span class="site-name">NoSmoke</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/NoSmoke/guide/" class="nav-link router-link-exact-active router-link-active">Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/NoSmoke/guide/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/NoSmoke/zh/guide/" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/macacajs/NoSmoke" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/NoSmoke/guide/" class="nav-link router-link-exact-active router-link-active">Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/NoSmoke/guide/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/NoSmoke/zh/guide/" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/macacajs/NoSmoke" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/NoSmoke/guide/quick-start.html" class="sidebar-link">Quick-Start</a></li><li><a href="/NoSmoke/guide/configuration.html" class="sidebar-link">Configuration Items</a></li><li><a href="/NoSmoke/guide/cross-platform.html" class="sidebar-link">Cross Platform</a></li><li><a href="/NoSmoke/guide/hooks.html" class="sidebar-link">Hooks</a></li><li><a href="/NoSmoke/guide/continious-integration.html" class="sidebar-link">Continous Integration</a></li><li><a href="/NoSmoke/guide/roadmap.html" class="sidebar-link">Feature Roadmaps</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="nosmoke-2-0-cookbook"><a href="#nosmoke-2-0-cookbook" aria-hidden="true" class="header-anchor">#</a> NoSmoke 2.0 Cookbook</h1> <p>NoSmoke is a cross platform UI crawler which scans view trees/conduct ocr operations and then generate and execute UI test cases.  Used for smoke testing under continuous integration. Following <a href="https://www.w3.org/TR/webdriver/" target="_blank" rel="noopener noreferrer">WDA<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> protocol. This document is written as a manual for NoSmoke 2.0.</p> <h2 id="_1-advantages-of-nosmoke"><a href="#_1-advantages-of-nosmoke" aria-hidden="true" class="header-anchor">#</a> 1. Advantages of NoSmoke:</h2> <p>With it you can:</p> <ul><li><p>[x] Conduct <strong>automated UI test</strong> with <strong>simple configuration</strong> and <strong>minimum testing scripts</strong> manually created.</p></li> <li><p>[x] <strong>More accurate than monkey test</strong>, instead of generate randomised UI test action, crawler analyse current screens potential UI elements and triggers action targeting those elements.</p></li> <li><p>[x] One tool, <strong>multiple platforms - iOS and Android</strong> !! :]</p></li> <li><p>[x] <strong>Visualise (automation) testing result</strong> and validate the testing history via <a href="https://github.com/macacajs/macaca-reporter" target="_blank" rel="noopener noreferrer">Macaca-Reporter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h2 id="_2-how-it-works"><a href="#_2-how-it-works" aria-hidden="true" class="header-anchor">#</a> 2. How it works?</h2> <h3 id="from-version-1-0"><a href="#from-version-1-0" aria-hidden="true" class="header-anchor">#</a> From version 1.0</h3> <p>From NoSmoke version 1.0, it relies on retrieving source information from local drivers in xml format.</p> <h3 id="from-version-2-0"><a href="#from-version-2-0" aria-hidden="true" class="header-anchor">#</a> From version 2.0</h3> <p>From NoSmoke version 2.0, OCR is introduced to NoSmoke, by retrieving textual information directly from image, previously tons of calculation of xml view hierarchy on driver process has been removed.</p> <p><img src="/NoSmoke/assets/macaca-architecture-2.0.png" alt></p> <h3 id="difference-between-versions"><a href="#difference-between-versions" aria-hidden="true" class="header-anchor">#</a> Difference between versions:</h3> <table><thead><tr><th>Attributes</th> <th>Version 1</th> <th>Version 2</th></tr></thead> <tbody><tr><td>Support Platform</td> <td>Android iOS Web</td> <td>Android iOS</td></tr> <tr><td>Configurable Items</td> <td>14 configuration</td> <td>4 simplified configuration</td></tr> <tr><td>Hook APIs</td> <td>5 hooks</td> <td>1 simplified hooks</td></tr> <tr><td>Hook implementation</td> <td>Raw restful wda request</td> <td>Encapsulated APIs for click/input/drag</td></tr> <tr><td>Duration per iteration</td> <td>12 Second / Round</td> <td>5 Second / Round</td></tr> <tr><td>Stability Factor</td> <td>0.6</td> <td>0.95</td></tr> <tr><td>Module Dependencies</td> <td>Macaca Drivers</td> <td>Macaca/Appium Drivers</td></tr></tbody></table> <h2 id="_3-list-of-features"><a href="#_3-list-of-features" aria-hidden="true" class="header-anchor">#</a> 3.  List of Features</h2> <h3 id="a-muliplatform"><a href="#a-muliplatform" aria-hidden="true" class="header-anchor">#</a> a. Muliplatform</h3> <p>NoSmoke supports UI crawling and testing for <strong>iOS</strong>, <strong>Android</strong>, <a href="https://github.com/macacajs/macaca-reporter" target="_blank" rel="noopener noreferrer">macaca-reporter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used to gather and present the crawling process.</p> <p><img src="/NoSmoke/assets/new_report_layout.png" alt></p> <h3 id="b-configurable"><a href="#b-configurable" aria-hidden="true" class="header-anchor">#</a> b. Configurable</h3> <p>Refer to the crawler.config.yml file in the NoSmoke/public folder as a example. You can choose which platform to conduct the crawling task:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>desiredCapabilities<span class="token punctuation">:</span>
    platformName<span class="token punctuation">:</span> <span class="token string">'iOS/Android'</span>
    deviceName<span class="token punctuation">:</span> <span class="token string">'iPhone 6 Plus'</span>
    app<span class="token punctuation">:</span> <span class="token string">'${downloadable address of .ipa/.apk file}'</span>
</code></pre></div><p>And the corresponding configuration for crawling the app:</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>crawlingConfig<span class="token punctuation">:</span>
  strategy<span class="token punctuation">:</span> <span class="token string">'ocr'</span>
  platform<span class="token punctuation">:</span> <span class="token string">'${platform: android/ios}'</span>
  triggers<span class="token punctuation">:</span>
    <span class="token operator">-</span> <span class="token string">'${prioritised trigger point}'</span>
  exclude<span class="token punctuation">:</span>
    <span class="token operator">-</span> <span class="token string">'${exclude text patten}'</span>
</code></pre></div><h3 id="c-hookable"><a href="#c-hookable" aria-hidden="true" class="header-anchor">#</a> c. Hookable</h3> <p>NoSmoke 2.0 Reduced the number of Hooks provided for app crawling process, which also reduces the cost of integration.</p> <p>After an certain UI action has been performed, you can intercept the crawling task and manually execute any UI operation. After you are done, you can resume the crawling automation process.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * Method to perform action for the current platform, invoked when the action is going to perform
 * @Params: action the action which belongs to current active node, user can determine the priority of action execution
 * @Params: crawler the crawler instance which contains the context information as well as crawler config
 * */</span>
Hooks<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>onActionPerformed <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> crawler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// password input</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">&quot;Enter your MPIN&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// here hook provides API for click/type/drag.</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'method'</span><span class="token punctuation">:</span><span class="token string">'xpath'</span><span class="token punctuation">,</span> <span class="token string">'xpath'</span><span class="token punctuation">:</span><span class="token string">'${xpath of element}'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'method'</span><span class="token punctuation">:</span><span class="token string">'xpath'</span><span class="token punctuation">,</span> <span class="token string">'xpath'</span><span class="token punctuation">:</span><span class="token string">'${xpath of element}'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'2580'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Read the following chapters to know <a href="/NoSmoke/guide/quick-start.html">how to setup</a> then <a href="/NoSmoke/guide/cross-platform.html">you can start on different platforms</a> and <a href="/NoSmoke/guide/hooks.html">further customization</a> to fullfil your own desired crawling behaviour.</p> <h3 id="demos"><a href="#demos" aria-hidden="true" class="header-anchor">#</a> Demos</h3> <p>TBD</p> <h3 id="license"><a href="#license" aria-hidden="true" class="header-anchor">#</a> License</h3> <p>The MIT License (MIT)</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/macacajs/NoSmoke/edit/master/docs_src/guide/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/27/2018, 3:32:02 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/NoSmoke/assets/js/app.085bbc4d.js" defer></script><script src="/NoSmoke/assets/js/4.d8129c02.js" defer></script>
  </body>
</html>
